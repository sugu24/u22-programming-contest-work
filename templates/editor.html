{% extends 'base.html' %}
{% load static %}

{% block header %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type='text/css' href="{% static 'editor.css' %}">
<link rel="stylesheet" type='text/css' href="{% static 'header.css' %}">
{% endblock header %}

{% block content %}
<header>
    <div id="greede">greede</div>
    {% if user.is_authenticated %}
    <div id="showuser">
        <div id="username">ユーザー名 : {{ user.username }}
            {% if join_group %}
            <br>参加グループ : {{ join_group }}
            {% endif %}
        </div>
    </div>
    {% endif %}
    <div id="join_group"><a href="{% url 'joinGroup' %}">新たにグループに参加する</a></div>
    <div class="hamburger-menu">
        <input type="checkbox" id="menu-btn-check" class="menu-btn-check">
        <label for="menu-btn-check" class="menu-btn"><span></span></label>
        <div class="menu-content">
            <div id="menu-top"> <a href="#greede-guide">topへ</a></div>
            <div id="greede-guide">
                <h4>greedeの書き方</h4>
                <ul>
                    <li><a href="#var-syntax">変数</a></li>
                    <li><a href="#calc-syntax">四則演算</a></li>
                    <li><a href="#print-syntax">出力</a></li>
                    <li><a href="#input-syntax">入力</a></li>
                    <li><a href="#if-syntax">条件分岐</a></li>
                    <li><a href="#torf-syntax">条件式</a></li>
                    <li><a href="#loop-syntax">繰り返し</a></li>
                    <li><a href="#def-syntax">関数</a></li>
                    <li><a href="#scope-syntax">スコープ</a></li>
                    <li><a href="#global-syntax">global</a></li>
                    <li><a href="#continue-syntax">continue</a></li>
                    <li><a href="#break-syntax">break</a></li>
                    <li><a href="comment-syntax">コメント</a></li>
                </ul>              
            </div>
            <div id="greede-syntax">
                <div class="syntax" id="var-syntax">
                    <h3 class="heading">変数</h3>
                    <div class="contents">
                        変数とは <span class="strong">"数字を入れる箱"</span> です。<br>
                        数字を入れる時は <span class="strong"> 変数 = 数字</span> と数字を入れる際は = を使用します <br>
                        変数(に限らずこのプログラミング言語)はアルファベットのみで書いていきます。<br>
                        ただし、後に紹介する文字列やコメントではひらがなや漢字を使用できます。<br>
                        変数の具体例↓<br>
                        変数に数字を入れる : <span class="code">a = 1</span> (変数aに1を入れる) <br>
                        変数に変数を入れる : <span class="code">b = a</span> (変数bに変数aを入れる) <br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="calc-syntax">
                    <h3 class="heading">四則演算</h3>
                    <div class="contetns">
                        四則演算は 和差積商 のことですが、それに加え "余り" "割り切り" "計算の優先順番" について紹介します。 <br>
                        例 ↓ <br>
                        足し算 : <span class="code">1 + 1, a + 1, a + a</span><br>
                        引き算 : <span class="code">1 - 1, a - 1, a - a</span><br>
                        掛け算 : <span class="code">1 * 1, a * 1, a * a</span><br>
                        割り算 : <span class="code">1 / 1, a / 1, a / a</span><br>
                        余り : <span class="code">1 % 1, a % 1, a % a</span><br>
                        割り切り : <span class="code">1 // 1, a // 1, a // a</span><br>
                        四則演算の省略 : <span class="code">a += 1</span> (a = a + 1の略)<br>
                        計算の優先順位 : <span class="code">a*(1+b)</span> のようにカッコで指定。<br>
                        <br>四則演算の結果を変数に入れる場合は <span class="code">a = b + 1</span> とする。<br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="print-syntax">
                    <h3 class="heading">出力</h3>
                    <div class="contetns">
                        出力をする際に使用するのは "<span class="strong">print</span>" です。<br>
                        "print" は print(出力したい文) と書きます。<br>
                        使用例 ↓<br>
                        数字・変数・関数の表示 : <span class="code">print(1) print(a) print(def())</span><br>
                        文字列を表示 : <span class="code">print("表示したい文字列")</span><br>
                        複数の表示 : <span class="code">print(1,a,def(),"文字列")</span><br>
                        改行の表示 : <span class="code">print()</span><br>
                        途中で改行を入れる表示 : <span class="code">pirnt(a,,a)</span><br>
                        途中で改行を入れる補足説明 . コロン(,)とコロンの間に何も書かない場合と最後にコロンを書いた場合に改行がされる<br>
                        数字の有効桁数・幅指定 : 
                        <span class="code">
                            print(a¥幅指定¥有効桁数)<br>
                        </span>
                        <br>幅指定は右詰めで指定された幅で出力されます。<br>
                        有効桁数は、指定しないと切り捨て整数で出力され、指定すると小数第n+1桁(n:指定数字)を四捨五入して、表示されます。<br>
                        <br>
			整数を表示したい場合は <span class="code">print(1\\)</span> です。
                        <br>
			<br>
                    </div>
                </div>
                <div class="syntax" id="input-syntax">
                    <h3 class="heading">入力</h3>
                    <div class="contetns">
                        入力を受け取る際に使用するのが <span class="strong">input</span> です。<br>
                        <span class="strong">input</span> は <span class="code">input(a,b)</span>のように書き<br>
                        それぞれの変数に入力値が代入されます。<br>
                        画面のエディタの下に並んだ黒いスペースの右側が入力値を入力するエリアです。<br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="if-syntax">
                    <h3 class="heading">条件分岐</h3>
                    <div class="contents">
                        条件分岐とはある条件を満たしたら、ある処理をするという場合に使用します。<br>
                        条件分岐をするには <span class="code">?,??,-></span> という記号を使用し、条件式は <span class="strong">[] </span>で囲まなくても大丈夫です 。<br>
                        （条件式というものが出てきますが、次に説明します）<br>
                        使用例 ↓<br>
                        <span class="code">
                            ? [条件式1] （条件式を満たすなら{}内の処理をする）<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;処理<br>
                            }<br>
                            ?? [条件式2]{  (条件式1が満たされず条件式2を満たすなら{}内の処理をする)<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;処理<br>
                            }<br>
                            ?? [条件式3]{    (条件式1,2が満たされず条件式3が満たされたら{}内の処理をする)<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;処理<br>
                            }<br>
                            ->{      (条件式1,2,3...全てを満たさない場合、->の{}内の処理をする) <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;処理<br>
                            }<br>
                        </span><br>
                        （?? は複数重ねられます。）
                        <br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="torf-syntax">
                    <h3 class="heading">条件式</h3>
                    <div class="contents">
                        ある2つの式・数・変数が指定した条件を満たすかどうかを判定します。<br>
                        使用例 ↓<br>
                        等しいか判定 : <span class="code">a == 1 + b</span><br>
                        等しくないか判定 <span class="code">a != 1 + b</span>
                        未満か判定 : <span class="code">a > b, c < d</span><br>
                        以上か判定 : <span class="code">a >= b, c <= d</span><br>
                        <br>
                        また、2つ以上の条件式を同時に満たしていることを判定する場合は <span class="strong">and,or</span> を使用します。<br>
                        使用例 ↓<br>
                        2つ等しいか判定 : <span class="code">a == b and c == d</span><br>
                        2つの内1つでも等しいか判定 : <span class="code">a == b or c == d</span><br>
                        <br>
                        難しい話だが、結合力は <span class="strong">or < and</span> であるため<br>
                        条件式1を満たすか、条件式2と条件式3の2つが共に満たすか判定したい場合は<br>
                        <span class="code">条件式1 or (条件式2 and 条件式3)</span><br>
                        とする。<br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="loop-syntax">
                    <h3 class="heading">繰り返し</h3>
                    <div class="contents">
                        繰り返し構文とは、ある処理を複数回行いたい場合に使用します。<br>
                        構文のコードは、 <span class="strong">変数 = 式（初期値）..式（終了値）{処理}</span> です。<br>
                        なお、変数は処理の中で使用可能です。<br>
                        処理の流れは<br>
                        1. 初期値を変数に代入し、処理を行う。<br>
                        2. 1が終わったら変数に、初期値+1を代入し、処理を行う。<br>
                        (終了値より変数が大きくなるまで2を繰り返す)<br>
                        です。<br>
                        例として、1から9まで出力するプログラムを示します。<br>
                        <span class="code">
                            i = 1..9{ <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;print(i)<br>
                            }<br>
                        </span>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="def-syntax">
                    <h3 class="heading">関数</h3>
                    <div class="contents">
                        関数とは、ある変数を渡した時に、決まった処理を行ってくれる優れものです。<br>
                        関数を使用することで、コードが見やすくなったり、変更が簡単になります。<br>
                        関数の例として、2つの変数を足して結果を教えてくれる関数を示します。<br>
                        <span class="code">
                            add(a,b){ <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;return a+b <br>
                            } <br>
                            c = add(1,2)<br>
                        </span>
                        上のコードは、add という関数に、1,2を渡してそれぞれa,bに代入し<br>
                        <span class="strong">return</span> というものを使い、関数を呼び出した部分に a+b の結果を返しています。<br>
                        add(1,2)の結果は、そのまま変数に代入できます。<br>
                        <br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="scope-syntax">
                    <h3 class="heading">スコープ</h3>
                    <div class="contents">
                        スコープとは、変数を使用できる範囲のことを言います。<br>
                        例えば、関数内で作成した変数は、関数外では使用できません。<br>
                        以下に、スコープの例を示します。<br>
                        <span class="code">
                            a = 1<br>
                            add(b,c){ <br>
                                print(a,) (aはadd関数内では使えません)<br>
                                d = b + c <br>
                                return d <br>
                            } <br>
                            print(d,) (dはadd関数外では使えません)<br>
                            e = add(1,2)<br>
                        </span>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="global-syntax">
                    <h3 class="heading">global</h3>
                    <div class="contents">
                        1つ前でスコープを説明しました。<br>
                        しかし、関数外で作成した変数を直接使用したい場合もあります。<br>
                        そこで使用するのが <span class="strong">global</span> です。<br>
                        以下に、<span class="strong">global</span> の例を示します。<br>
                        <span class="code">
                            a = 1<br>
                            add_a(b){ <br>
                                global a<br>
                                a += b <br>
                            } <br>
			    add_a(2) <br>
                            print(a\\,) (出力:3)<br>
                        </span>
                        <br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="continue-syntax">
                    <h3 class="heading">continue</h3>
                    <div class="contents">
                        <span class="strong">continue</span> とは、繰り返し構文の処理中に使用します。<br>
                        <span class="strong">continue</span> を使用すると、繰り返し構文の処理を中断して、次の繰り返し処理に進みます。<br>
                        使用例 ↓<br>
                        <span class="code">
                            i = 1..5{ <br>
                                &nbsp;&nbsp;&nbsp;&nbsp;? [i % 2 == 0]{<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;print(i\\," ")<br>
                            }<br>
                        </span>
                        <br>
                        使用例の説明：<br>
                        iが偶数の場合に次の繰り返し処理へ移るため、<br>
			出力は <span class="code">1 3 5</span> となります。<br><br>
                        また、<span class="code">continue(数字)</span> とすると、数字分外にある繰り返し構文の処理に移ります。<br>
                        具体例 ↓<br>
                        <span class="code">
                            i = 1..5{ (2)<br> 
                                &nbsp;&nbsp;&nbsp;&nbsp; j = 1..5{ (1) <br>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue(2)<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;} <br>
                            }<br>
                        </span>
                        具体例の説明: <br>
                        4行目の <span class="code">continue(2)</span> を実行すると<br>
                        continueから見て、2つ目に外にある繰り返し構文(2)に移り、iに+1されて処理されます。<br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="break-syntax">
                    <h3 class="heading">break</h3>
                    <div class="contents">
                        <span class="strong">break</span> は <span class="strong">continue</span> とほとんど同じですが<br>
                        <span class="strong">break</span> は繰り返し構文を抜けるために使用します。<br>
                        使用例 : <br>
                        <span class="code">
                            i = 1..5{ <br>
                                &nbsp;&nbsp;&nbsp;&nbsp; break <br>
                            } <br>
                            print("break後")
                        </span>
                        <br>
                        使用例の解説 : 
                        <span class="strong">break</span> が実行されると<br>
                        繰り返し構文を抜けて、 <span class="code">print("break後")</span> を実行します。<br>
                        また、<span class="strong">continue</span> と同様に <span class="strong">break(3)</span> のように指定可能です。<br>
                        <br>
                        <br>
                    </div>
                </div>
                <div class="syntax" id="comment-syntax">
                    <h3 class="heading">コメント</h3>
                    <div class="contents">
                        コメントとは、コードとして認識されない機能でメモとして使用できます。<br>
                        コメントにしたい部分は <span class="strong">#</span> の後に書きます。<br>
                        使用例:<br>
                        <span class="code">
                            #コメント部分<br>
                            print("コメントではない") #コメント部分<br>
                        </span>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>


<div class="container" id="editor-area">
    <div id="lines"><div id="num0" class="focusline">1</div></div>
    <div id="editor" contenteditable="true" spellcheck="false"><div id="line0"><br></div></div>        
</div>    

<div class="function">
    <div class="output_div">
	<div id="output_exp">出力</div>
    	<textarea readonly name="output" id="output" cols="30" rows="10"></textarea>
    </div>
    <div class="input_div">
	<div id="input_exp">入力</div>
    	<textarea name="input" id="input" cols="30" rows="10"></textarea>
    </div>
    <div class="btns">
        <button class="btn btn-delete" type="reset" onclick="deleteOutput()">リセット</button>
        <form id="ajax_exec" action="" method="POST">{% csrf_token %}
            <button class="btn btn-execute" type="submit" name="program_data">実行</button>
        </form>
        {% if join_group %}
        <form id="ajax_submit" action="" method="POST">
            <button class="btn btn-submit" type="submit" name="program_submit">提出</button>
        </form>
        {% endif %}
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    function getCookie(name) {
      var cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          var cookies = document.cookie.split(';');
          for (var i = 0; i < cookies.length; i++) {
              var cookie = jQuery.trim(cookies[i]);
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }

  var csrftoken = getCookie('csrftoken');

  function csrfSafeMethod(method) {
      // these HTTP methods do not require CSRF protection
      return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
  }

  $.ajaxSetup({
      beforeSend: function (xhr, settings) {
          if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
              xhr.setRequestHeader("X-CSRFToken", csrftoken);
          }
      }
  });
</script>
<script src="{% static 'editor.js' %}"></script>
{% endblock content %}
